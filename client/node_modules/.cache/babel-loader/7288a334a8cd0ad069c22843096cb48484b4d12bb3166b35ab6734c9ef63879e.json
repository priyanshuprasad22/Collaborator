{"ast":null,"code":"var __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useEffect, useMemo, useState } from 'react';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var useCooldownTimer = function () {\n  var _a;\n  var latestMessageDatesByChannels = useChatContext('useCooldownTimer').latestMessageDatesByChannels;\n  var _b = useChannelStateContext('useCooldownTimer'),\n    channel = _b.channel,\n    _c = _b.messages,\n    messages = _c === void 0 ? [] : _c;\n  var client = useChatContext('useCooldownTimer').client;\n  var _d = useState(),\n    cooldownRemaining = _d[0],\n    setCooldownRemaining = _d[1];\n  var _e = channel.data || {},\n    cooldownInterval = _e.cooldown,\n    own_capabilities = _e.own_capabilities;\n  var skipCooldown = !(own_capabilities === null || own_capabilities === void 0 ? void 0 : own_capabilities.includes('slow-mode'));\n  var ownLatestMessageDate = useMemo(function () {\n    var _a, _b;\n    return (_a = latestMessageDatesByChannels[channel.cid]) !== null && _a !== void 0 ? _a : (_b = __spreadArray([], messages, true).sort(function (a, b) {\n      var _a, _b;\n      return ((_a = b.created_at) === null || _a === void 0 ? void 0 : _a.getTime()) - ((_b = a.created_at) === null || _b === void 0 ? void 0 : _b.getTime());\n    }).find(function (v) {\n      var _a, _b;\n      return ((_a = v.user) === null || _a === void 0 ? void 0 : _a.id) === ((_b = client.user) === null || _b === void 0 ? void 0 : _b.id);\n    })) === null || _b === void 0 ? void 0 : _b.created_at;\n  }, [messages, (_a = client.user) === null || _a === void 0 ? void 0 : _a.id, latestMessageDatesByChannels, channel.cid]);\n  useEffect(function () {\n    if (skipCooldown || !cooldownInterval || !ownLatestMessageDate) return;\n    var remainingCooldown = Math.round(cooldownInterval - (new Date().getTime() - ownLatestMessageDate.getTime()) / 1000);\n    if (remainingCooldown > 0) setCooldownRemaining(remainingCooldown);\n  }, [cooldownInterval, ownLatestMessageDate, skipCooldown]);\n  return {\n    cooldownInterval: cooldownInterval !== null && cooldownInterval !== void 0 ? cooldownInterval : 0,\n    cooldownRemaining: cooldownRemaining,\n    setCooldownRemaining: setCooldownRemaining\n  };\n};","map":{"version":3,"names":["__spreadArray","to","from","pack","arguments","length","i","l","ar","Array","prototype","slice","call","concat","useEffect","useMemo","useState","useChatContext","useChannelStateContext","useCooldownTimer","_a","latestMessageDatesByChannels","_b","channel","_c","messages","client","_d","cooldownRemaining","setCooldownRemaining","_e","data","cooldownInterval","cooldown","own_capabilities","skipCooldown","includes","ownLatestMessageDate","cid","sort","a","b","created_at","getTime","find","v","user","id","remainingCooldown","Math","round","Date"],"sources":["C:/Project-1/Collborator/client/node_modules/stream-chat-react/dist/components/MessageInput/hooks/useCooldownTimer.js"],"sourcesContent":["var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useEffect, useMemo, useState } from 'react';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var useCooldownTimer = function () {\n    var _a;\n    var latestMessageDatesByChannels = useChatContext('useCooldownTimer').latestMessageDatesByChannels;\n    var _b = useChannelStateContext('useCooldownTimer'), channel = _b.channel, _c = _b.messages, messages = _c === void 0 ? [] : _c;\n    var client = useChatContext('useCooldownTimer').client;\n    var _d = useState(), cooldownRemaining = _d[0], setCooldownRemaining = _d[1];\n    var _e = (channel.data ||\n        {}), cooldownInterval = _e.cooldown, own_capabilities = _e.own_capabilities;\n    var skipCooldown = !(own_capabilities === null || own_capabilities === void 0 ? void 0 : own_capabilities.includes('slow-mode'));\n    var ownLatestMessageDate = useMemo(function () {\n        var _a, _b;\n        return (_a = latestMessageDatesByChannels[channel.cid]) !== null && _a !== void 0 ? _a : (_b = __spreadArray([], messages, true).sort(function (a, b) { var _a, _b; return ((_a = b.created_at) === null || _a === void 0 ? void 0 : _a.getTime()) - ((_b = a.created_at) === null || _b === void 0 ? void 0 : _b.getTime()); })\n            .find(function (v) { var _a, _b; return ((_a = v.user) === null || _a === void 0 ? void 0 : _a.id) === ((_b = client.user) === null || _b === void 0 ? void 0 : _b.id); })) === null || _b === void 0 ? void 0 : _b.created_at;\n    }, [messages, (_a = client.user) === null || _a === void 0 ? void 0 : _a.id, latestMessageDatesByChannels, channel.cid]);\n    useEffect(function () {\n        if (skipCooldown || !cooldownInterval || !ownLatestMessageDate)\n            return;\n        var remainingCooldown = Math.round(cooldownInterval - (new Date().getTime() - ownLatestMessageDate.getTime()) / 1000);\n        if (remainingCooldown > 0)\n            setCooldownRemaining(remainingCooldown);\n    }, [cooldownInterval, ownLatestMessageDate, skipCooldown]);\n    return {\n        cooldownInterval: cooldownInterval !== null && cooldownInterval !== void 0 ? cooldownInterval : 0,\n        cooldownRemaining: cooldownRemaining,\n        setCooldownRemaining: setCooldownRemaining,\n    };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}